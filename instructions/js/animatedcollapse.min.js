/** @Preserve
* July 3rd 2009
* Animated Collapsible DIV v2.4- (c) Dynamic Drive DHTML code library (www.dynamicdrive.com)
* This notice MUST stay intact for legal use
* Visit Dynamic Drive at http://www.dynamicdrive.com/ for this script and 100s more
*
* Plus some modifications 
*/
var animatedcollapse={divholders:{},divgroups:{},lastactiveingroup:{},preloadimages:[],show:function(e){if("object"==typeof e)for(var t=0;t<e.length;t++)this.showhide(e[t],"show");else this.showhide(e,"show")},hide:function(e){if("object"==typeof e)for(var t=0;t<e.length;t++)this.showhide(e[t],"hide");else this.showhide(e,"hide")},toggle:function(e){"object"==typeof e&&(e=e[0]),this.showhide(e,"toggle")},addDiv:function(e,t){return this.divholders[e]={id:e,$divref:null,attrs:t},this.divholders[e].getAttr=function(e){var t=new RegExp(e+"=([^,]+)","i");return t.test(this.attrs)&&0!=parseInt(RegExp.$1)?RegExp.$1:null},this.currentid=e,this},expandAnchor:function(){var e=location.hash;if(e=e.substr(1,e.length-1),this.divholders[e]){var t=this.divholders[e].$divref;1==t.length&&this.show(e)}},showhide:function(e,t){var i=this.divholders[e].$divref;if(this.divholders[e]&&1==i.length){var s=this.divgroups[i.attr("groupname")];i.attr("groupname")&&s.count>1&&("show"==t||"toggle"==t&&"none"==i.css("display"))?(s.lastactivedivid&&s.lastactivedivid!=e&&this.slideengine(s.lastactivedivid,"hide"),this.slideengine(e,"show"),s.lastactivedivid=e):this.slideengine(e,t)}},slideengine:function(e,t){var i=this.divholders[e].$divref,s=this.divholders[e].$togglerimage;if(this.divholders[e]&&1==i.length){if(animatedcollapse.onbeforetoggle)try{var n="show"==t||"toggle"==t&&"none"==i.css("display");animatedcollapse.onbeforetoggle(jQuery,i.get(0),i.css("display"),n?"block":"none")}catch(o){alert('An error exists inside your "ontoggle" function:\n\n'+o+"\n\nAborting execution of function.")}var a={height:t};return i.attr("fade")&&(a.opacity=t),i.animate(a,i.attr("speed")?parseInt(i.attr("speed")):500,function(){if(s&&s.attr("src","none"==i.css("display")?s.data("srcs").closed:s.data("srcs").open),animatedcollapse.ontoggle)try{animatedcollapse.ontoggle(jQuery,i.get(0),i.css("display"))}catch(e){alert('An error exists inside your "ontoggle" function:\n\n'+e+"\n\nAborting execution of function.")}}),!1}},generatemap:function(){for(var e={},t=0;t<arguments.length;t++)null!=arguments[t][1]&&(e[arguments[t][0]]=arguments[t][1]);return e},init:function(){var e=this;jQuery(document).ready(function(t){animatedcollapse.ontoggle=animatedcollapse.ontoggle||null;var i=animatedcollapse.urlparamselect(),s=e.getCookie("acopendivids"),n=e.getCookie("acgroupswithpersist");null!=s&&(s="nada"==s?[]:s.split(",")),n=null==n||"nada"==n?[]:n.split(","),jQuery.each(e.divholders,function(){if(this.$divref=t("#"+this.id),!this.getAttr("persist")&&-1==jQuery.inArray(this.getAttr("group"),n)||null==s)var o=this.getAttr("hide")?"none":null;else var o=-1!=jQuery.inArray(this.id,s)?"block":"none";if("all"==i[0]||-1!=jQuery.inArray(this.id,i)?o="block":"none"==i[0]&&(o="none"),this.$divref.css(e.generatemap(["height",this.getAttr("height")],["display",o])),this.$divref.attr(e.generatemap(["groupname",this.getAttr("group")],["fade",this.getAttr("fade")],["speed",this.getAttr("speed")])),this.getAttr("group")){var a=e.divgroups[this.getAttr("group")]||(e.divgroups[this.getAttr("group")]={});a.count=(a.count||0)+1,-1!=jQuery.inArray(this.id,i)&&(a.lastactivedivid=this.id,a.overridepersist=1),(!a.lastactivedivid&&"none"!=this.$divref.css("display")||"block"==o&&"undefined"==typeof a.overridepersist)&&(a.lastactivedivid=this.id),this.$divref.css({display:"none"})}}),jQuery.each(e.divgroups,function(){this.lastactivedivid&&"none"!=i[0]&&e.divholders[this.lastactivedivid].$divref.show()}),animatedcollapse.onbeforetoggle&&jQuery.each(e.divholders,function(){animatedcollapse.onbeforetoggle(jQuery,this.$divref.get(0),this.$divref.css("display"),this.$divref.css("display"))}),animatedcollapse.ontoggle&&jQuery.each(e.divholders,function(){animatedcollapse.ontoggle(jQuery,this.$divref.get(0),this.$divref.css("display"))});var o=t("a[rel]").filter('[rel^="collapse["], [rel^="expand["], [rel^="toggle["]');o.each(function(){this._divids=this.getAttribute("rel").replace(/(^\w+)|(\s+)/g,"").replace(/[\[\]']/g,""),1==this.getElementsByTagName("img").length&&e.divholders[this._divids]&&(animatedcollapse.preloadimage(this.getAttribute("data-openimage"),this.getAttribute("data-closedimage")),$togglerimage=t(this).find("img").eq(0).data("srcs",{open:this.getAttribute("data-openimage"),closed:this.getAttribute("data-closedimage")}),e.divholders[this._divids].$togglerimage=t(this).find("img").eq(0),e.divholders[this._divids].$togglerimage.attr("src","none"==e.divholders[this._divids].$divref.css("display")?$togglerimage.data("srcs").closed:$togglerimage.data("srcs").open)),t(this).click(function(){var e=this.getAttribute("rel"),t=""==this._divids?[]:this._divids.split(",");return t.length>0?(animatedcollapse[/expand\[/i.test(e)?"show":/collapse\[/i.test(e)?"hide":"toggle"](t),!1):void 0})}),animatedcollapse.expandAnchor(),t(window).bind("unload",function(){e.uninit()})})},uninit:function(){var e="",t="";jQuery.each(this.divholders,function(){"none"!=this.$divref.css("display")&&(e+=this.id+","),this.getAttr("group")&&this.getAttr("persist")&&(t+=this.getAttr("group")+",")}),e=""==e?"nada":e.replace(/,$/,""),t=""==t?"nada":t.replace(/,$/,""),this.setCookie("acopendivids",e),this.setCookie("acgroupswithpersist",t)},getCookie:function(e){var t=new RegExp(e+"=[^;]*","i");return document.cookie.match(t)?document.cookie.match(t)[0].split("=")[1]:null},setCookie:function(e,t,i){if("undefined"!=typeof i){var s=new Date;s.setDate(s.getDate()+i),document.cookie=e+"="+t+"; path=/; expires="+s.toGMTString()}else document.cookie=e+"="+t+"; path=/"},urlparamselect:function(){return window.location.search.match(/expanddiv=([\w\-_,]+)/i),""!=RegExp.$1?RegExp.$1.split(","):[]},preloadimage:function(){for(var e=this.preloadimages,t=0;t<arguments.length;t++)arguments[t]&&arguments[t].length>0&&(e[e.length]=new Image,e[e.length-1].src=arguments[t])}};